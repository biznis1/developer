<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
  

  <!-- CSS  -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
    
    <script>
     var getUrlParameter = function getUrlParameter(sParam) {
    var sPageURL = decodeURIComponent(window.location.search.substring(1)),
        sURLVariables = sPageURL.split('&'),
        sParameterName,
        i;

    for (i = 0; i < sURLVariables.length; i++) {
        sParameterName = sURLVariables[i].split('=');

        if (sParameterName[0] === sParam) {
            return sParameterName[1] === undefined ? true : sParameterName[1];
        }
    }
};
        
        
    var result = getUrlParameter('result');
        
       function result1(){
           window.localStorage.setItem('rowVal',0);
           $('#result').html(result);
           $("#result").fadeOut(5000);
       }
          
        
    </script>
</head>
<body onload="result1()">
  <nav class="light-blue lighten-1" role="navigation">
    <div class="nav-wrapper container"><a id="logo-container" href="#" class="brand-logo">Form</a>
      <ul class="right hide-on-med-and-down">
        <li><a href="#">Navbar Link</a></li>
      </ul>

      
      
    </div>
  </nav>
    <center><p id='result'></p></center>
  <div class="section no-pad-bot" id="index-banner">
    <div class="container">
      <br><br>
      
      
      <div class="row center">
          <a class="btn modal-trigger" onclick="$('#modal1').modal('open')" >GSTR1</a>
      </div>
      <br><br>

    </div>
  </div>


  <div class="container">
    <div class="section">

      <!--   Icon Section   -->
      <div class="row">
        <div class="col s12 m4">
          <div class="icon-block">
            
            

            
          </div>
        </div>

       

        
      </div>

    </div>
    <br><br>
  </div>

  
    
<div id="modal1" class="modal modal-fixed-footer">
    <div class="modal-content">
        <center><h6>B2B invoice</h6></center>
      <div class="input-field col s12">
          <input id="Chksum" type="text" class="validate">
          <label for="Chksum">CHKSUM</label>
        </div>
        <div class="input-field col s12">
          <input id="Chksum" type="text" class="validate">
          <label for="Chksum">UPDBY</label>
        </div>
        <div class="input-field col s12">
          <input id="Chksum" type="text" class="validate">
          <label for="Chksum">INUM</label>
        </div>
        <div class="input-field col s12">
          <input id="Chksum" type="text" class="validate">
          <label for="Chksum">IDT</label>
        </div>
        <div class="input-field col s12">
          <input id="Chksum" type="text" class="validate">
          <label for="Chksum">VAL</label>
        </div>
        <div class="input-field col s12">
          <input id="Chksum" type="text" class="validate">
          <label for="Chksum">POS</label>
        </div>
        <div class="input-field col s12">
          <input id="Chksum" type="text" class="validate">
          <label for="Chksum">RCHRG</label>
        </div>
        <div class="input-field col s12">
          <input id="Chksum" type="text" class="validate">
          <label for="Chksum">INV TYP</label>
        </div>
        <div class="input-field col s12">
          <input id="Chksum" type="text" class="validate">
          <label for="Chksum">CFLAG</label>
        </div>
        <div class="input-field col s12">
          <input id="Chksum" type="text" class="validate">
          <label for="Chksum">ETIN</label>
        </div>
        <div class="input-field col s12">
          <input id="Chksum" type="text" class="validate">
          <label for="Chksum">VAL</label>
        </div>
        
        <table rules="all" style="background:#fff;">
            <tr>
            <td style="font-size:14px;" >num</td>
            <td style="font-size:14px;">rt</td>
            <td style="font-size:14px;">txval</td>
             <td style="font-size:14px;">iamt</td>
             <td style="font-size:14px;">camt</td>
             <td style="font-size:14px;">samt</td>   
            <td><span style="font:normal 12px agency, arial; color:blue; text-decoration:underline; cursor:pointer;" onclick="addMoreRows(this.form);">
            <i class="material-icons">note_add</i>
            </span>
            </td>
            </tr>
            <tr id="rowCount0">
            <td><input name="" id="num0" type="text"  value="" /></td>
            <td><input name="" id="rt0" type="text"  value="" /></td>
            <td><input name="" id="txval0" type="text"  value="" /></td>
            <td><input name="" id="iamt0" type="text"  value="" /></td>
            <td><input name="" id="camt0" type="text"  value="" /></td>
            <td><input name="" id="samt0" type="text"  value="" /></td>
            </tr>
            </table>
            <div id="addedRows"></div>
        
    </div>
    
     

    <div class="modal-footer">
      <a onclick="saveData()" href="#!" class="left modal-action modal-close waves-effect waves-green btn-flat ">submit</a>
      <a  href="#!" class="right modal-action modal-close waves-effect waves-green btn-flat red-text">Cancel</a>
    </div>
    
  </div>

  <!--  Scripts-->
  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="js/materialize.js"></script>
  <script src="js/init.js"></script>

  </body>
    <script>
        function submit(val){
//            alert(val);
            window.location.replace('index.html?result='+val);
            
        }
   
var rowCount = 0;
function addMoreRows(frm) {
rowCount ++;
    window.localStorage.setItem('rowVal',rowCount);
var recRow = '<tr id="rowCount'+rowCount+'"><td><input name="" id="num'+rowCount+'" type="text"  maxlength="120" /></td><td><input name="" type="text" id="rt'+rowCount+'" maxlength="120"/></td><td><input name="" id="txval'+rowCount+'" type="text" maxlength="120" /></td><td><input name="" id="iamt'+rowCount+'" type="text" maxlength="120" /></td><td><input name="" id="camt'+rowCount+'" type="text" maxlength="120" /></td><td><input name="" id="samt'+rowCount+'" type="text" maxlength="120" /></td><td> <a href="javascript:void(0);" onclick="removeRow('+rowCount+');"><i class="material-icons" style="color:red">indeterminate_check_box</i></a></td></tr>';
jQuery('#addedRows').append(recRow);
}

function removeRow(removeNum) {
    var rowCount = window.localStorage.getItem('rowVal');
    var rowVal = rowCount - 1;
    window.localStorage.setItem('rowVal',rowVal);
jQuery('#rowCount'+removeNum).remove();
}
        
        function saveData(){
            var newArray = [];
            var newArray2 = [];
            var rowCount = window.localStorage.getItem('rowVal');
            for(var i=0; i<=rowCount; i++){
                
            var numval = document.getElementById('num'+i).value;
            var rt = document.getElementById('rt'+i).value;
            var txval = document.getElementById('txval'+i).value;
            var iamt = document.getElementById('iamt'+i).value;
            var camt = document.getElementById('camt'+i).value;
            var samt = document.getElementById('samt'+i).value;

                var rowArray = rowCount+i;
                console.log(rowArray);
                rowArray = {num:numval, rt:rt, txvale:txval, iamt:iamt, camt:camt, samt:samt};
                window.localStorage.setItem('rowArray'+i, JSON.stringify(rowArray));
            
               
               newArray2[i] = rowArray;
                
            }
               console.log('NewArray',newArray2);
               console.log('NewArray',JSON.stringify(newArray2));

        }
        
</script>
</html>
